quarkus.datasource.db-kind=postgresql
quarkus.datasource.username=quarkus_test
quarkus.datasource.password=quarkus_test
quarkus.datasource.reactive.url=postgresql://localhost:5432/quarkus_test


sudo -u postgres psql
create database totemftc;
create user totemftc with encrypted password 'totemftc';
grant all privileges on database totemftc to totemftc;

docker exec -it papa-postgresql psql
\c totemftc- totemftc  # connect to db
\c[onnect] {[DBNAME|- USER|- HOST|- PORT|-] | conninfo}
\d <table_name> # describe table
\dt             # Show tables
\dt+
\ds             # Show sequences
\d <sequence_name>
\z training_type;

select currval('user_info_user_id_seq'); - doesn't work without inserts


SELECT grantee, privilege_type
FROM information_schema.role_table_grants
WHERE table_name='training_type';

SELECT grantee,object_name, object_type, privilege_type
FROM information_schema.role_usage_grants
;

SELECT * FROM pg_tables
WHERE schemaname = 'public'
AND tableowner != 'totemftc';

ALTER TABLE training_visit OWNER TO totemftc;
ALTER TABLE IF EXISTS training_visit ADD PRIMARY KEY (training_id, user_id);


PLPGSQL example
https://stackoverflow.com/questions/129265/cascade-delete-just-once

# Export / import
pg_dump -U username dbname > dbexport.pgsql
psql -U username dbname < dbexport.pgsql

pg_dump --host=localhost --username=totemftc --password --dbname=totemftc --data-only --schema=public "--file=$(date +%Y-%m-%d)_totemftc.dump.sql"
psql --host=localhost --username=totemftc --password --dbname=totemftc --file=<date>_totemftc.dump.sql

pg_dump --exclude-table=public.ticket_type --exclude-table=public.training_type --exclude-table=public.user_image --exclude-table=public.user_session \
    --exclude-table=public.user_type_description
